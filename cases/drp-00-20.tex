\subsection{DRP-00-20: Scientific Verification of Forced Source Catalog}
\label{drp-00-20}

\begin{note}
Forced photometry on Sources is not nearly as mature as other parts of the pipeline: it is significantly harder to run at scale, and we have essentially no faith in the scientific quality of the results, as there is no deblending.

I'm also not sure if our the ``pipe\_analysis'' scripts can be run on forced
photometry outputs, but if we can't get that working quickly we probably don't deserve to pass this test.
\end{note}

\subsubsection{Requirements}

DMS-REQ-0334, DMS-REQ-0268, DMS-REQ-0347, DMS-REQ-0331.

\subsubsection{Test items}
\label{drp-00-20-items}

This test will check that the forced source catalogs delivered by the DRP
science payload meet the requirements laid down by \citeds{LSE-61}.

Specifically, this will demonstrate that:

\begin{itemize}

  \item{Measurements in the catalog are presented in flux units
  (DMS-REQ-0347);}
  \item{Derived quantities are provided in pre-computed columns
  (DMS-REQ-0331);}
  \item{Aperture corrections for different photometry algorithms are consistent.}
  \item{Photometry measurements are consistent with reference catalog photometry (including sources not used in photometric calibration).}

\end{itemize}

This test does not include quantitative targets for the science quality criteria; we instead require for each test that we be able to quickly construct a plot in which such a target can be visualized.

All science quality tests in this section shall distinguish between blended and isolated objects.

\subsubsection{Intercase dependencies}

\begin{itemize}

  \item{\hyperref[drp-00-00]{DRP-00-00}}
  \item{\hyperref[drp-00-10]{DRP-00-10}}

\end{itemize}

\subsubsection{Environmental needs}

\paragraph{Hardware}

The test shall be carried out on a machine with at least 16\,GB of RAM and
multiple CPU cores which has access to the \texttt{/datasets} shared (GPFS)
filesystem at the LSST Data Facility.

\paragraph{Software}

Release 14.0 of the DM Software Stack will be pre-installed (following the
procedure described in \hyperref[drp-00-00]{DRP-00-00}).

\subsubsection{Input specification}

A complete processing of the Hyper Suprime-Cam ``RC2'' dataset, as defined
at ...

\begin{note}
This dataset is currently being defined in DM-11345. We need to make sure the
results of that ticket are clearly published somewhere to complete this test
spec.

\end{note}

... through the DRP Science Payload.

This dataset shall be made available in a standard LSST data repository,
accessible via the ``Data Butler''.

It is not required that all combinations of visit and CCD have been processed
successfully: a number of failures are expected. However, documentation to
describe processing failures should be provided.

\subsubsection{Output specification}

None.

\subsubsection{Procedure}

\begin{itemize}

  \item{The DM Stack shall be initialized using the \texttt{loadLSST} script
  (as described in \hyperref[drp-00-00]{DRP-00-00}).}

  \item{A ``Data Butler'' will be initialized to access the repository.}

  \item{Scripts from the \texttt{pipe\_analysis} package will be used to check for the presence of data products and make plots.}

\end{itemize}
